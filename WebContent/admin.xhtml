<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">

	<rich:collapsiblePanel header="Upravljanje smerovima"
		switchType="client" styleClass="panel panel-primary"
		headerClass="panel-heading" bodyClass="panel-body">

	</rich:collapsiblePanel>

	<rich:collapsiblePanel header="Semestar" switchType="client"
		styleClass="panel panel-primary" headerClass="panel-heading"
		bodyClass="panel-body">
		<h:form id="semesterForm">
			<div class="row">
				<div class="col-sm-3">
					<h:outputLabel value="Trenutno aktivni semestar: " />
				</div>
				<div class="col-sm-6">
					<h:outputLabel
						value="#{semesterController.activeSemester==null ? 'Trenutno nijedan semestar nije aktivan' : semesterController.activeSemester}" />
				</div>
			</div>

			<rich:dataTable id="semesterList" var="semester" rows="5"
				value="#{semesterController.listSemesters()}"
				iterationStatusVar="it" styleClass="table table-bordered">

				<rich:column id="semesterColumn" sortBy="#{semester.toString()}">
					<f:facet name="header">
						Semestar
					</f:facet>
					<h:outputText value="#{semester.toString()}" />
				</rich:column>

				<rich:column id="statusColumn">
					<f:facet name="header">
						Status
					</f:facet>
					<h:outputText
						value="#{semester.active==true ? 'aktivan' : 'neaktivan'}" />
				</rich:column>

				<rich:column id="actionColumn" styleClass="text-center"
					rendered="#{loginController.userType() eq 2}">
					<f:facet name="header">
						Aktivacija/Deaktivacija
					</f:facet>
					<h:commandButton style="btn"
						action="#{semesterController.activateSemester(semester.id)}"
						value="Aktivacija">
						<f:ajax execute="@this" render="@form" />
					</h:commandButton>
					<h:commandButton style="btn"
						action="#{semesterController.deactivateSemester(semester.id)}"
						value="Deaktivacija">
						<f:ajax execute="@this" render="@form" />
					</h:commandButton>
				</rich:column>
			</rich:dataTable>

			<div class="container">
				<div class="row">
					<div class="col-sm-6">
						<h:outputLabel value="Skolska godina: " />
					</div>
					<div class="col-sm-6">
						<h:inputText value="#{semesterController.schoolYear}" />
					</div>
				</div>

				<div class="row">
					<div class="col-sm-6">
						<h:outputLabel value="Pocetak semestra: " />
					</div>
					<div class="col-sm-6">
						<rich:calendar value="#{semesterController.startDate}" />
					</div>
				</div>

				<div class="row">
					<div class="col-sm-6">
						<h:outputLabel value="Kraj semestra: " />
					</div>
					<div class="col-sm-6">
						<rich:calendar value="#{semesterController.endDate}" />
					</div>
				</div>

				<div class="row">
					<div class="col-sm-6">
						<h:outputLabel value="Tip semestra: " />
					</div>
					<div class="col-sm-6">
						<h:selectOneMenu value="#{semesterController.ordinalNumber}">
							<f:selectItem itemLabel="Zimski" itemValue="1" />
							<f:selectItem itemLabel="Letnji" itemValue="2" />
						</h:selectOneMenu>
					</div>
				</div>

				<div class="row text-right">
					<h:commandButton action="#{semesterController.addNewSemester()}"
						value="Sacuvaj" styleClass="btn btn-sm btn-primary">
						<f:ajax execute="@form" render="@form" />
					</h:commandButton>
				</div>
			</div>
		</h:form>
	</rich:collapsiblePanel>

	<rich:collapsiblePanel header="Kreiranje rasporeda casova"
		switchType="client" styleClass="panel panel-primary"
		headerClass="panel-heading" bodyClass="panel-body">
		<h:form>
			<h:commandButton styleClass="btn btn-sm btn-primary"
				action="#{timetableController.createTimetable()}"
				value="Kreiraj raspored" />
		</h:form>
	</rich:collapsiblePanel>

</ui:composition>