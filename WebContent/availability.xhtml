<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">

	<rich:collapsiblePanel header="Dostupni/nedostupni termini - profesori"
		switchType="client" styleClass="panel panel-primary"
		headerClass="panel-heading" bodyClass="panel-body">

		<rich:dataTable id="teacherAvailabilitiesList"
			var="teacherAvailability" rows="10"
			value="#{availabilitiesController.listAllTeacherAvailabilities()}"
			iterationStatusVar="it" styleClass="table table-bordered">

			<rich:column id="teacherColumn"
				sortBy="#{teacherAvailability.teacher.firstName}">
				<f:facet name="header">
					Profesor
				</f:facet>
				<h:outputText value="#{teacherAvailability.teacher}" />
			</rich:column>

			<rich:column id="typeColumn">
				<f:facet name="header">
					Tip termina
				</f:facet>
				<h:outputText value="#{teacherAvailability.type}" />
			</rich:column>

			<rich:column id="dayMarkColumn">
				<f:facet name="header">
					Oznaka termina
				</f:facet>
				<h:outputText value="#{teacherAvailability.dayMark}" />
			</rich:column>

			<rich:column id="termNumberColumn">
				<f:facet name="header">
					Redni broj termina
				</f:facet>
				<h:outputText value="#{teacherAvailability.termNumber}" />
			</rich:column>

			<rich:column styleClass="text-center" rendered="#{user.type eq 2}">
				<f:facet name="header">
					Brisanje
				</f:facet>
				<a4j:commandLink
					oncomplete="#{rich:component('deleteTeacherAvailabilityWarning')}.show()"
					execute="@this" render="@none" title="Obriši termin za profesora">
					<h:graphicImage value="/images/delete.gif" alt="delete" />
					<a4j:param value="#{it.index}"
						assignTo="#{availabilitiesController.selectedTeacherAvailabilityIndex}" />
				</a4j:commandLink>
			</rich:column>

			<f:facet name="footer">
				<rich:dataScroller renderIfSinglePage="false" />
			</f:facet>
		</rich:dataTable>

		<!-- POPUP ZA POTVRDU BRISANJA -->
		<rich:popupPanel id="deleteTeacherAvailabilityWarning" modal="false"
			autosized="true" resizeable="false" styleClass="panel panel-info"
			headerClass="panel-heading">
			<f:facet name="header">
				<h:outputText value="Upozorenje" />
			</f:facet>
			<f:facet name="controls">
				<h:outputLink value="#"
					onclick="#{rich:component('deleteTeacherAvailabilityWarning')}.hide(); return false;"
					style="color: inherit"> X </h:outputLink>
			</f:facet>
			<p>Da li ste sigurni da želite da obrišete termin za profesora?</p>
			<a4j:commandButton
				action="#{availabilitiesController.deleteTeacherAvailability()}"
				value="Obriši"
				oncomplete="#{rich:component('deleteTeacherAvailabilityWarning')}.hide();">
				<a4j:ajax execute="@this" render="@form" />
			</a4j:commandButton>
			<a4j:commandButton value="Odustani"
				onclick="#{rich:component('deleteTeacherAvailabilityWarning')}.hide(); return false;" />
		</rich:popupPanel>

		<a4j:region>
			<div class="page-header">
				<h3>Unos vrsta termina za nastavnika</h3>
			</div>

			<div class="container">
				<div class="row">
					<div class="col-sm-3">
						<h:outputLabel value="Profesor:" />
					</div>

					<div class="col-sm-3">
						<h:outputLabel value="Vrsta termina:" />
					</div>

					<div class="col-sm-3">
						<h:outputLabel value="Radni dan:" />
					</div>

					<div class="col-sm-3">
						<h:outputLabel value="Redni broj termina:" />
					</div>
				</div>

				<div class="row">
					<div class="col-sm-3">
						<h:selectOneMenu id="teacherAvailability" required="true"
							value="#{availabilitiesController.teacher}"
							converter="#{teacherConverter}" rendered="#{user.type eq 2}">
							<f:selectItem itemLabel="-- Izaberite profesora --"
								itemValue="#{null}" />
							<f:selectItems
								value="#{availabilitiesController.listAllTeachers()}"
								var="teacher" itemLabel="#{teacher.toString()}"
								itemValue="#{teacher}" />
							<f:ajax event="change" execute="@this" />
						</h:selectOneMenu>

						<h:outputLabel value="#{loginController.user.toString()}"
							rendered="#{user.type eq 1}" />
					</div>
					<div class="col-sm-3">
						<h:selectOneRadio layout="pageDirection"
							value="#{availabilitiesController.teacherAvailabilityType}">
							<f:selectItem itemValue="FORBIDDEN" itemLabel="Zabranjeni" />
							<f:selectItem itemValue="UNDESIRABLE" itemLabel="Nepozeljni" />
							<f:selectItem itemValue="DESIRABLE" itemLabel="Pozeljni" />
							<f:selectItem itemValue="MANDATORY" itemLabel="Obavezni" />
						</h:selectOneRadio>
					</div>
					<div class="col-sm-3">
						<h:selectOneRadio
							value="#{availabilitiesController.teacherAvailabilityDayMark}"
							layout="pageDirection">
							<f:selectItems
								value="#{availabilitiesController.listAllAvailablePeriods()}"
								var="period" itemValue="#{period.dayMark}"
								itemLabel="#{period.day}" />
							<f:ajax event="click" execute="@this"
								render="teacherAvailabilityTermNumbers"
								listener="#{availabilitiesController.listAllTeacherAvailableTermsForSelectedDay()}" />
						</h:selectOneRadio>
					</div>
					<div class="col-sm-3">
						<h:selectManyCheckbox id="teacherAvailabilityTermNumbers"
							value="#{availabilitiesController.teacherAvailabilityTermNumbers}"
							layout="pageDirection">
							<f:selectItems
								value="#{availabilitiesController.teacherAvailabilityTermsForSelectedDay}"
								var="term" itemValue="#{term}" itemLabel="#{term}" />
						</h:selectManyCheckbox>
					</div>
				</div>
				<div class="row text-right">
					<h:commandButton
						action="#{availabilitiesController.addTeacherAvailability()}"
						value="Sacuvaj" styleClass="btn btn-sm btn-primary">
						<a4j:ajax render="@form" />
					</h:commandButton>
				</div>
			</div>
		</a4j:region>
	</rich:collapsiblePanel>

	<rich:collapsiblePanel header="Dostupni/nedostupni termini - grupe"
		switchType="client" styleClass="panel panel-primary"
		headerClass="panel-heading" bodyClass="panel-body" expanded="false">
		<rich:dataTable id="groupAvailabilitiesList" var="groupAvailability"
			rows="10"
			value="#{availabilitiesController.listAllGroupAvailabilities()}"
			iterationStatusVar="it" styleClass="table table-bordered">

			<rich:column id="groupColumn"
				sortBy="#{groupAvailability.group.name}">
				<f:facet name="header">
					Grupa
				</f:facet>
				<h:outputText value="#{groupAvailability.group}" />
			</rich:column>

			<rich:column id="typeColumn">
				<f:facet name="header">
					Tip termina
				</f:facet>
				<h:outputText value="#{groupAvailability.type}" />
			</rich:column>

			<rich:column id="dayMarkColumn">
				<f:facet name="header">
					Oznaka termina
				</f:facet>
				<h:outputText value="#{groupAvailability.dayMark}" />
			</rich:column>

			<rich:column id="termNumberColumn">
				<f:facet name="header">
					Redni broj termina
				</f:facet>
				<h:outputText value="#{groupAvailability.termNumber}" />
			</rich:column>

			<rich:column styleClass="text-center" rendered="#{user.type eq 2}">
				<f:facet name="header">
					Brisanje
				</f:facet>
				<a4j:commandLink
					oncomplete="#{rich:component('deleteGroupAvailabilityWarning')}.show()"
					execute="@this" render="@none" title="Obriši termin za grupu">
					<h:graphicImage value="/images/delete.gif" alt="delete" />
					<a4j:param value="#{it.index}"
						assignTo="#{availabilitiesController.selectedGroupAvailabilityIndex}" />
				</a4j:commandLink>
			</rich:column>

			<f:facet name="footer">
				<rich:dataScroller renderIfSinglePage="false" />
			</f:facet>
		</rich:dataTable>

		<!-- POPUP ZA POTVRDU BRISANJA -->
		<rich:popupPanel id="deleteGroupAvailabilityWarning" modal="false"
			autosized="true" resizeable="false" styleClass="panel panel-info"
			headerClass="panel-heading">
			<f:facet name="header">
				<h:outputText value="Upozorenje" />
			</f:facet>
			<f:facet name="controls">
				<h:outputLink value="#"
					onclick="#{rich:component('deleteGroupAvailabilityWarning')}.hide(); return false;"
					style="color: inherit"> X </h:outputLink>
			</f:facet>
			<p>Da li ste sigurni da želite da obrišete termin za grupu?</p>
			<a4j:commandButton
				action="#{availabilitiesController.deleteGroupAvailability()}"
				value="Obriši"
				oncomplete="#{rich:component('deleteGroupAvailabilityWarning')}.hide();">
				<a4j:ajax execute="@this" render="@form" />
			</a4j:commandButton>
			<a4j:commandButton value="Odustani"
				onclick="#{rich:component('deleteGroupAvailabilityWarning')}.hide(); return false;" />
		</rich:popupPanel>

		<a4j:region>
			<div class="page-header">
				<h3>Unos vrsta termina za grupu</h3>
			</div>

			<div class="container">
				<div class="row">
					<div class="col-sm-3">
						<h:outputLabel value="Grupa::" />
					</div>

					<div class="col-sm-3">
						<h:outputLabel value="Vrsta termina:" />
					</div>

					<div class="col-sm-3">
						<h:outputLabel value="Radni dan:" />
					</div>

					<div class="col-sm-3">
						<h:outputLabel value="Redni broj termina:" />
					</div>
				</div>

				<div class="row">
					<div class="col-sm-3">
						<h:selectOneMenu id="groupAvailability" required="true"
							value="#{availabilitiesController.group}"
							converter="#{groupConverter}">
							<f:selectItem itemLabel="-- Izaberite grupu --"
								itemValue="#{null}" />
							<f:selectItems
								value="#{availabilitiesController.listAllGroups()}" var="group"
								itemLabel="#{group.toString()}" itemValue="#{group}" />
							<f:ajax event="change" execute="@this" />
						</h:selectOneMenu>
					</div>
					<div class="col-sm-3">
						<h:selectOneRadio layout="pageDirection"
							value="#{availabilitiesController.groupAvailabilityType}">
							<f:selectItem itemValue="FORBIDDEN" itemLabel="Zabranjeni" />
							<f:selectItem itemValue="UNDESIRABLE" itemLabel="Nepozeljni" />
							<f:selectItem itemValue="DESIRABLE" itemLabel="Pozeljni" />
							<f:selectItem itemValue="MANDATORY" itemLabel="Obavezni" />
						</h:selectOneRadio>
					</div>
					<div class="col-sm-3">
						<h:selectOneRadio
							value="#{availabilitiesController.groupAvailabilityDayMark}"
							layout="pageDirection">
							<f:selectItems
								value="#{availabilitiesController.listAllAvailablePeriods()}"
								var="period" itemValue="#{period.dayMark}"
								itemLabel="#{period.day}" />
							<f:ajax event="click" execute="@this"
								render="groupAvailabilityTermNumbers"
								listener="#{availabilitiesController.listAllGroupAvailableTermsForSelectedDay()}" />
						</h:selectOneRadio>
					</div>
					<div class="col-sm-3">
						<h:selectManyCheckbox id="groupAvailabilityTermNumbers"
							value="#{availabilitiesController.groupAvailabilityTermNumbers}"
							layout="pageDirection">
							<f:selectItems
								value="#{availabilitiesController.groupAvailabilityTermsForSelectedDay}"
								var="term" itemValue="#{term}" itemLabel="#{term}" />
						</h:selectManyCheckbox>
					</div>
				</div>
				<div class="row text-right">
					<h:commandButton
						action="#{availabilitiesController.addGroupAvailability()}"
						value="Sacuvaj" styleClass="btn btn-sm btn-primary">
						<a4j:ajax render="@form" />
					</h:commandButton>
				</div>
			</div>
		</a4j:region>
	</rich:collapsiblePanel>

	<rich:collapsiblePanel header="Dostupni/nedostupni termini - ucionice"
		switchType="client" styleClass="panel panel-primary"
		headerClass="panel-heading" bodyClass="panel-body" expanded="false">
		<rich:dataTable id="roomAvailabilitiesList" var="roomAvailability"
			rows="10"
			value="#{availabilitiesController.listAllRoomAvailabilities()}"
			iterationStatusVar="it" styleClass="table table-bordered">

			<rich:column id="roomColumn" sortBy="#{roomAvailability.room.name}">
				<f:facet name="header">
							Ucionica
						</f:facet>
				<h:outputText value="#{roomAvailability.room}" />
			</rich:column>

			<rich:column id="typeColumn">
				<f:facet name="header">
								Tip termina
							</f:facet>
				<h:outputText value="#{roomAvailability.type}" />
			</rich:column>

			<rich:column id="dayMarkColumn">
				<f:facet name="header">
					Oznaka termina
				</f:facet>
				<h:outputText value="#{roomAvailability.dayMark}" />
			</rich:column>

			<rich:column id="termNumberColumn">
				<f:facet name="header">
					Redni broj termina
				</f:facet>
				<h:outputText value="#{roomAvailability.termNumber}" />
			</rich:column>

			<rich:column styleClass="text-center" rendered="#{user.type eq 2}">
				<f:facet name="header">
					Brisanje
				</f:facet>
				<a4j:commandLink
					oncomplete="#{rich:component('deleteRoomAvailabilityWarning')}.show()"
					execute="@this" render="@none" title="Obriši termin za ucionicu">
					<h:graphicImage value="/images/delete.gif" alt="delete" />
					<a4j:param value="#{it.index}"
						assignTo="#{availabilitiesController.selectedRoomAvailabilityIndex}" />
				</a4j:commandLink>
			</rich:column>

			<f:facet name="footer">
				<rich:dataScroller renderIfSinglePage="false" />
			</f:facet>
		</rich:dataTable>

		<!-- POPUP ZA POTVRDU BRISANJA -->
		<rich:popupPanel id="deleteRoomAvailabilityWarning" modal="false"
			autosized="true" resizeable="false" styleClass="panel panel-info"
			headerClass="panel-heading">
			<f:facet name="header">
				<h:outputText value="Upozorenje" />
			</f:facet>
			<f:facet name="controls">
				<h:outputLink value="#"
					onclick="#{rich:component('deleteRoomAvailabilityWarning')}.hide(); return false;"
					style="color: inherit"> X </h:outputLink>
			</f:facet>
			<p>Da li ste sigurni da želite da obrišete termin za grupu?</p>
			<a4j:commandButton
				action="#{availabilitiesController.deleteRoomAvailability()}"
				value="Obriši"
				oncomplete="#{rich:component('deleteRoomAvailabilityWarning')}.hide();">
				<a4j:ajax execute="@this" render="@form" />
			</a4j:commandButton>
			<a4j:commandButton value="Odustani"
				onclick="#{rich:component('deleteRoomAvailabilityWarning')}.hide(); return false;" />
		</rich:popupPanel>

		<a4j:region>
			<div class="page-header">
				<h3>Unos vrsta termina za učionice</h3>
			</div>

			<div class="container">
				<div class="row">
					<div class="col-sm-3">
						<h:outputLabel value="Grupa:" />
					</div>

					<div class="col-sm-3">
						<h:outputLabel value="Vrsta termina:" />
					</div>

					<div class="col-sm-3">
						<h:outputLabel value="Radni dan:" />
					</div>

					<div class="col-sm-3">
						<h:outputLabel value="Redni broj termina:" />
					</div>
				</div>

				<div class="row">
					<div class="col-sm-3">
						<h:selectOneMenu id="roomAvailability" required="true"
							value="#{availabilitiesController.room}"
							converter="#{roomConverter}">
							<f:selectItem itemLabel="-- Izaberite ucionicu --"
								itemValue="#{null}" />
							<f:selectItems value="#{availabilitiesController.listAllRooms()}"
								var="room" itemLabel="#{room.toString()}" itemValue="#{room}" />
							<f:ajax event="change" execute="@this" />
						</h:selectOneMenu>
					</div>
					<div class="col-sm-3">
						<h:selectOneRadio layout="pageDirection"
							value="#{availabilitiesController.roomAvailabilityType}">
							<f:selectItem itemValue="FORBIDDEN" itemLabel="Zabranjeni" />
							<f:selectItem itemValue="UNDESIRABLE" itemLabel="Nepozeljni" />
							<f:selectItem itemValue="DESIRABLE" itemLabel="Pozeljni" />
							<f:selectItem itemValue="MANDATORY" itemLabel="Obavezni" />
						</h:selectOneRadio>
					</div>
					<div class="col-sm-3">
						<h:selectOneRadio
							value="#{availabilitiesController.roomAvailabilityDayMark}"
							layout="pageDirection">
							<f:selectItems
								value="#{availabilitiesController.listAllAvailablePeriods()}"
								var="period" itemValue="#{period.dayMark}"
								itemLabel="#{period.day}" />
							<f:ajax event="click" execute="@this"
								render="roomAvailabilityTermNumbers"
								listener="#{availabilitiesController.listAllRoomAvailableTermsForSelectedDay()}" />
						</h:selectOneRadio>
					</div>
					<div class="col-sm-3">
						<h:selectManyCheckbox id="roomAvailabilityTermNumbers"
							value="#{availabilitiesController.roomAvailabilityTermNumbers}"
							layout="pageDirection">
							<f:selectItems
								value="#{availabilitiesController.roomAvailabilityTermsForSelectedDay}"
								var="term" itemValue="#{term}" itemLabel="#{term}" />
						</h:selectManyCheckbox>
					</div>
				</div>
				<div class="row text-right">
					<h:commandButton
						action="#{availabilitiesController.addRoomAvailability()}"
						value="Sacuvaj" styleClass="btn btn-sm btn-primary">
						<a4j:ajax render="@form" />
					</h:commandButton>
				</div>
			</div>
		</a4j:region>
	</rich:collapsiblePanel>
</ui:composition>